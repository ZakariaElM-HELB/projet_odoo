<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reels</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      margin: 0;
      padding: 0;
      background-color: black;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .home-button {
      position: fixed;
      top: 10px;
      left: 10px;
      font-size: 2.5rem;
      background: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      border-radius: 50%;
      width: 60px;
      height: 60px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      z-index: 1000;
    }

    .home-button:hover {
      background: rgba(0, 0, 0, 0.8);
    }

    .reel-container {
      position: relative;
      width: 100%;
      height: calc(100vw * 9 / 16); /* Ratio 16:9 */
      max-height: 100vh;
      background-color: black;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .reel-video {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    .controls {
      position: absolute;
      bottom: 5%;
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 20px;
    }

    .controls button {
      font-size: 3rem;
      background: none;
      border: none;
      color: white;
      text-shadow: 0 0 5px black;
      cursor: pointer;
    }

    .controls button:hover {
      transform: scale(1.2);
      transition: transform 0.2s ease;
    }

    .comments-section {
      position: absolute;
      bottom: 0;
      width: 100%;
      max-height: 30vh;
      background: rgba(0, 0, 0, 0.8);
      color: white;
      overflow-y: auto;
      padding: 10px;
      display: none; /* Masqu√© par d√©faut */
    }

    .comments-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .comments-header h4 {
      margin: 0;
    }

    .close-button {
      background: none;
      border: none;
      color: white;
      font-size: 1.5rem;
      cursor: pointer;
    }

    .close-button:hover {
      color: red;
    }

    .comment {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
      font-size: 1.2rem;
    }

    .comment img {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      margin-right: 10px;
    }

    .emoji-picker {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }

    .emoji-picker button {
      font-size: 1.8rem;
      border: none;
      background: none;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .emoji-picker button:hover {
      transform: scale(1.2);
    }

    .nav-buttons {
      position: absolute;
      width: 100%;
      top: 50%;
      display: flex;
      justify-content: space-between;
      transform: translateY(-50%);
      padding: 0 10px;
    }

    .nav-buttons button {
      background: rgba(0, 0, 0, 0.5);
      border: none;
      color: white;
      font-size: 3rem;
      cursor: pointer;
      padding: 10px;
    }

    .nav-buttons button:hover {
      background: rgba(0, 0, 0, 0.8);
    }

    .banana {
      position: absolute;
      font-size: 4rem;
      animation: fall 3s ease-in-out;
      z-index: 9999;
    }

    @keyframes fall {
      0% {
        transform: translateY(-100%) rotate(0deg);
        opacity: 1;
      }
      50% {
        transform: translateY(50vh) rotate(180deg);
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }
  </style>
</head>
<body>
  <button class="home-button" onclick="goHome()">üè†</button>

  <div class="reel-container">
    <video class="reel-video" autoplay controls>
      <source src="assets/videos/video1.mp4" type="video/mp4">
    </video>

    <!-- Boutons d'interaction -->
    <div class="controls">
      <button class="like-button" onclick="generateBananas()">üçå</button>
      <button class="comment-button" onclick="toggleComments()">üôâ</button>
      <button class="share-button">üîÑ</button>
    </div>

    <!-- Section des commentaires -->
    <div class="comments-section" id="comments-section">
      <div class="comments-header">
        <h4>Comments</h4>
        <button class="close-button" onclick="hideComments()">‚úñ</button>
      </div>
      <div id="comment-list">
        <!-- Les commentaires s'afficheront ici -->
      </div>
      <div class="emoji-picker">
        <button onclick="addComment('üòÇ')">üòÇ</button>
        <button onclick="addComment('üôâ')">üôâ</button>
        <button onclick="addComment('üçå')">üçå</button>
        <button onclick="addComment('‚ù§Ô∏è')">‚ù§Ô∏è</button>
        <button onclick="addComment('üî•')">üî•</button>
        <button onclick="addComment('üòé')">üòé</button>
        <button onclick="addComment('üêí')">üêí</button>
      </div>
    </div>

    <!-- Boutons de navigation -->
    <div class="nav-buttons">
      <button class="prev-button" onclick="loadVideo(currentIndex - 1)">‚è™</button>
      <button class="next-button" onclick="loadVideo(currentIndex + 1)">‚è©</button>
    </div>
  </div>

  <script>
    const videos = [
      "assets/videos/video1.mp4",
      "assets/videos/video2.mp4",
      "assets/videos/video3.mp4"
    ];
    const comments = {
      0: ["üòÇ", "üçå", "üôâ"],
      1: ["üî•", "‚ù§Ô∏è"],
      2: ["üêí", "üòé", "ü•≥"]
    };
    let currentIndex = 0;
    const videoElement = document.querySelector(".reel-video");

    function loadVideo(index) {
      currentIndex = (index + videos.length) % videos.length;
      videoElement.src = videos[currentIndex];
      videoElement.play();
      hideComments(); // Masquer les commentaires lors du changement de vid√©o
    }

    function goHome() {
      window.location.href = "index.html";
    }

    function toggleComments() {
      const commentsSection = document.getElementById("comments-section");
      commentsSection.style.display = commentsSection.style.display === "none" || !commentsSection.style.display
        ? "block"
        : "none";
      displayComments();
    }

    function hideComments() {
      const commentsSection = document.getElementById("comments-section");
      commentsSection.style.display = "none";
    }

    function displayComments() {
      const commentList = document.getElementById("comment-list");
      commentList.innerHTML = comments[currentIndex]
        .map(comment => `<div class="comment"><img src="assets/img/monkeySelfie1.jpg" alt="User"><span>${comment}</span></div>`)
        .join("");
    }

    function addComment(emoji) {
      comments[currentIndex].push(emoji);
      displayComments();
    }

    function createFallingBanana() {
      const banana = document.createElement("div");
      banana.classList.add("banana");
      banana.textContent = "üçå";
      const randomX = Math.random() * window.innerWidth;
      const randomY = window.scrollY;
      banana.style.left = `${randomX}px`;
      banana.style.top = `${randomY}px`;
      document.body.appendChild(banana);
      setTimeout(() => banana.remove(), 3000);
    }

    function generateBananas() {
      const bananaCount = Math.floor(Math.random() * 31) + 20;
      for (let i = 0; i < bananaCount; i++) {
        setTimeout(createFallingBanana, i * 50);
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      loadVideo(0); // Charger la premi√®re vid√©o
    });
  </script>
</body>
</html>
